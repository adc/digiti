
<html>
<head><title>Converting postix &lt;-&gt; infix </head>
<body>
<script src="tree.js" ></script>
<script>
// {PEMDAS} Infix

function isalnum(input){
  if(input.match(/^[a-zA-Z0-9]+$/)){
    return true;
  } else {
    return false;
  }
}
//TODO: parentheses, functions, exponents, unary operators
//dijkstra'Z shunting-yard,
// haad ik maar en tijdmachine
//infix to postfix converter
function infix_to_postfix(input)
{
  postfix = [];
  opstack = [];
  
  for(var idx = 0; idx < input.length; idx++){
    //reading a number
    var token = ""
    if(isalnum(input[idx]))
    {
      while(idx < input.length && isalnum(input[idx])){
        token += input[idx++];
      }      
      postfix.push(token);
    }

    op = operators.indexOf(input[idx]);
    if(op != -1) {
      while(1) {
        prev = opstack[opstack.length-1];
        if(!prev || prev == "("){
          opstack.push(operators[op]);
          break;
        } else {
          //note: < vs <= here makes a difference
          //for things like 3+3*4+2. 
          //the result will be technically equivalent
          //but not of the preferred form for tree transformations
          if (op < operators.indexOf(prev)) {
            opstack.push(operators[op]);
            break;
          } else {
            postfix.push(opstack.pop());
          }
        }
      }
    }
    
    //handle parentheses 
    if(input[idx] == "("){
      opstack.push(input[idx])
    } else if (input[idx] == ")") {
      while(opstack.length > 0)
      {
        val = opstack.pop();
        if(val != "(") {
          postfix.push(val)
        } else {
          break;
        }
      }
      //todo stack error if opstack.length == 0
    }
  }

  while(opstack.length > 0) {
    postfix.push(opstack.pop());
  }

  return postfix; 
}

function i_to_p(input, output)
{
  var postfixList = infix_to_postfix(input)
  output.innerHTML = postfixList;
}

var tree;
function postfix_to_tree(input)
{
  nodestack = [];
  tree = new mathTree();
  
  tree.buildTree(nodestack, nodestack.length-1);
}


function p_to_i(input, output)
{
  output.innerHTML = input;
}
</script>



<form action="" name="text">
<h3>Infix->Postfix</h3>
<textarea name="input1"></textarea><br />
<input type="button" value="Submit" onclick="javascript:i_to_p(document.text.input1.value, document.getElementById('ret1'));" />

<h3>Postfix->Infix</h3>
<textarea name="input2"></textarea><br />
<input type="button" value="Submit" onclick="javascript:p_to_i(document.text.input2.value, document.getElementById('ret2'));" />
</form>

Infix->Postfix:
<div id="ret1">
</div>

Postfix->Infix
<div id="ret2">
</div>

</body>
</html>
